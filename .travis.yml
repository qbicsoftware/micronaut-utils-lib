dist: xenial
language: java
jdk: openjdk8
cache:
  directories:
  - $HOME/.m2/repository
  - $HOME/.cache/pip
  - $HOME/miniconda3
branches:
  only:
  - master
  - development
  - /^[vV]?\d+\.\d+\.\d+$/
before_install: unset _JAVA_OPTIONS
install:
- $HOME/miniconda3/bin/conda --version || ./.install-reports-dependencies.sh
before_script: if [ "$VAADIN_CHARTS_LICENSE_CODE" != "" ]; then echo "$VAADIN_CHARTS_LICENSE_CODE"
  > ~/.vaadin.charts.developer.license; fi;
script: mvn --quiet --activate-profiles !development-build,!release-build --settings
  .travis.settings.xml clean cobertura:cobertura package
after_success:
- bash <(curl -s https://codecov.io/bash)
deploy:
- skip_cleanup: true
  provider: script
  script: mvn --quiet --activate-profiles development-build,!release-build --settings
    .travis.settings.xml deploy -DskipITs
  on:
    branch: development
    condition: '"$TRAVIS_EVENT_TYPE" = "push"'
- skip_cleanup: true
  provider: script
  script: mvn --quiet --activate-profiles !development-build,release-build --settings
    .travis.settings.xml deploy -DskipITs
  on:
    condition: '"$TRAVIS_EVENT_TYPE" = "push"'
    tags: true
after_deploy:
- echo ". $HOME/miniconda3/etc/profile.d/conda.sh" >> ~/.bashrc && source ~/.bashrc
  && conda activate qbic-docs-build
- mvn --quiet --activate-profiles !development-build,!release-build --settings .travis.settings.xml
  site
- ./.generate-reports.py $TRAVIS_BRANCH $TRAVIS_REPO_SLUG "[skip travis] Updated gh-pages"
  "This commit was performed from travis-ci.com using a personal access key" "Build
  ID $TRAVIS_BUILD_ID" "Job ID TRAVIS_JOB_ID" "Branch $TRAVIS_BRANCH" "Log of this
  build found at $TRAVIS_JOB_WEB_URL"
notifications:
  email:
    on_success: never
    on_failure: never
  slack:
    on_success: never
    on_failure: always
    rooms:
    - secure: '***'
env:
  global:
  - secure: ntbV8S37+p5U5O0GCcOH5bnnz4CdBbNvt/Tq8gQntMcyoGansN38DCpzzGmC8ztokrdayKm8NqMUy0PxMwqfYlO14j7L3Kr1+G6pCV/Da4/vwFf57F98nEgBn77ILQr7/2/i4NFmR7Ug2MoFN0rXp8ut4xSe/055eK8s3A1k46WLcxBSpeThXb8TaWZAA079ACEyoIpIQlBUi7nmklqoQQicPT8PNwp9gUO7ILI4zv6URXkb5Dby9B++/0ayz3xdYuIQxZXZEytbDeIUMgdCQbFKPLF2lfuMP2n3qA06BaTw+Tb2lm2VVULe3BiZfmdeHl68pvhVAu/M5QiM3ItfDEyTcOHoVivSYWS0tnd9b/c3AHdGP1Y6YTsbpZw7I3BKouar48gYBCR6vghasWmGuDJYKulMcMjF8lUssa9ZFfoJAciPVljirKhAcy7X4TZw8doGSaQjuwFqSyGvDFaMXswSKyo9sprIkD9cV77QuhwUu4usju0w0jB8/FtE8RjQpuCC3jy42isnqEbefqoDP51HWTmzIYvDWox2BEfoUn/sIiPiTzFsXM+rhOxLqdBCaS0iTmqXP7+aQ3L6mpmCjaJ33ZE+1msmi2+2CiUvRHDQq+ipy27zwzLvhdfqG9a6xdnxdkUIHkUOP+A29jgPcQ8u5NxVwvh0QWAKnlkeWE4=
  - secure: vDroemumZ8Ttrgu4gRqj77mIII3D2W9NQ0sOTuOyLE0wLZxxazYJy4Zx7G8ng4XuT0OzZYxcKAQRANwPMB6H0Y9OzllFBMZiP23I1/UnCuuqE2G33eWArBvVtSFEUUa4qq2ma6BvTWwBqzAAmCvIdw93JUcwRJbGZlr49CkKN+Qya6i2mLN2TwAjAiul+kYbLbnaRpR9n0fYs73RP0XiEjKljGFl7d2TKZXYXGL4Ki/rr+u0K6Zp474qeXwmYughm+0GgwOVb2s96tZLQ+jomeWwiPcKE6EWJc404cTG9x+ns8uFjewicefWX2G3p186sm2xCBUuLfRnPgBS2aQ6I1lnfcZI6uBGjybRPtgt7P2i+PLs3YpCv2Naes+y0WOaDYIMS+uWGRutXZ3hTyOj6/8Gf+PtrNIfrjYVDd8uAHJABokmyWuYxyI4Wbo/cjJsHjtNp5kW7bPYHEhWpuSOmncDPrGGQwOdxNoe8k3O/4maeR9Pq3+PUntS9d1VsXxG3ykPgiBneCNL2fLLH+zdQjc+PKjMx7cpftNB+NTFJ8t5wiLW6Fle/ldqDoZes0rnMHmPpUElQR8u/BQ5Cp0+wuYaFhMhyjRTy9jlyTa6omXZuGJOTWCjsKdJPpKYAXn5dcqTdnBDjoRY82wbV4wcG1wQRxIiD9SdbiWWmfjfv2A=
