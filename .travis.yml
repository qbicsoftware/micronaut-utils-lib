dist: xenial
language: java
jdk: openjdk8
cache:
  directories:
  - $HOME/.m2/repository
  - $HOME/.cache/pip
  - $HOME/miniconda3
branches:
  only:
  - master
  - development
  - /^[vV]?\d+\.\d+\.\d+$/
before_install: unset _JAVA_OPTIONS
install:
- $HOME/miniconda3/bin/conda --version || ./.install-reports-dependencies.sh
before_script: if [ "$VAADIN_CHARTS_LICENSE_CODE" != "" ]; then echo "$VAADIN_CHARTS_LICENSE_CODE"
  > ~/.vaadin.charts.developer.license; fi;
script: mvn --quiet --activate-profiles !development-build,!release-build --settings
  .travis.settings.xml clean cobertura:cobertura package
after_success:
- bash <(curl -s https://codecov.io/bash)
deploy:
- skip_cleanup: true
  provider: script
  script: mvn --quiet --activate-profiles development-build,!release-build --settings
    .travis.settings.xml deploy -DskipITs
  on:
    branch: development
    condition: '"$TRAVIS_EVENT_TYPE" = "push"'
- skip_cleanup: true
  provider: script
  script: mvn --quiet --activate-profiles !development-build,release-build --settings
    .travis.settings.xml deploy -DskipITs
  on:
    condition: '"$TRAVIS_EVENT_TYPE" = "push"'
    tags: true
after_deploy:
- echo ". $HOME/miniconda3/etc/profile.d/conda.sh" >> ~/.bashrc && source ~/.bashrc
  && conda activate qbic-docs-build
- mvn --quiet --activate-profiles !development-build,!release-build --settings .travis.settings.xml
  site
- ./.generate-reports.py $TRAVIS_BRANCH $TRAVIS_REPO_SLUG "[skip travis] Updated gh-pages"
  "This commit was performed from travis-ci.com using a personal access key" "Build
  ID $TRAVIS_BUILD_ID" "Job ID TRAVIS_JOB_ID" "Branch $TRAVIS_BRANCH" "Log of this
  build found at $TRAVIS_JOB_WEB_URL"
notifications:
  email:
    on_success: never
    on_failure: never
  slack:
    on_success: never
    on_failure: always
    rooms:
    - secure: '***'
env:
  global:
  - secure: dq/5U35e7FWimfXg+232E/CwIBBS8MIqB3Vt7xgMMu148cU4dPdxf4yI9ErYPTteMav6usjjRul0jmFyojDgc0LZ4iRTJfeHIMwogmULXEowyUMzHZGwArGHa+ZQ0QXJ3HK3PpGDrjQAaLnYEG0qOvfxS+sYx841RtohYCKb0tgqkeH5UXFbxtczfAXRYNjB2k6uKN6gTRDjLPbK0OzD8YnK0jDcCKEtV/WQCAcB3vf6s45xbHxf2eBF9rkUo8Z2/z7Vx+ZkakK4TyZ64XTJBWvmDp2TjE8ozcsmEpC5HRbZArud4kBD15oHFst3S12Wl3WFbsozTP6p4bZC58OJ5lhx9+CDpsbGS3WTNuEiLbzh1ecw8gN2veEv48Vr09z3VBDRMh3R1MjsrU1n9kiN9Z69dpr7RcdQPoWVPP9jaIQmvLDxXCFT/v6sSB4cBbZaocx/M4xaw4iDRt0uoVRPtGn8BkCqJHBK/dZ5BYPs0ntsCXOsP7Dx1YCiSnlsArv3gFXhFJKl9CsZzVQl1IKCQEPtz4jpeuXgpVUdZuMWzXQ2t4A5Wae0nFECZ48Wuecf0VwT4txQtTTbGNoxxBtc5mOnwvvqFfurlxPDzsqqOfw/resNKF5AkipFFnH5eGhOtiLCxUnNtcGe5ILoTPbZv5PhWjEyed4xBHXHVHWmPhE=
  - secure: YQxcsNDhYcyi5nPC4Z6acbr0JVih3Wb++2ijxmcPPpbK6ncL25ndP6pAih1XoN+NggVbPhyKYfT5fnc10lXeT1Y5LJNQ64KgqUjL+D+bqRjNPldwsuh7w5AnQq6YBjSd9eZ31U32B0jg1RVo0FAznGFSqaRnb3a4YA2nlhpKnUJ8buP+86Gikg3tkAHg1R3QR6ahctlkSXvrxBmzMv6ixmzuSkp602E0lTSesNchZgC9KFvXz8PMoo3e3tIHWAFSCXcvdd1rl7XlDWR+TG7ubtjyykcI+eCEYzU8pTQxmOKQkc95ht8zL6u/Vsmo03z2hRsEvRO/3qFg89fMnXKQYBB2BfIwN6y3oWu9+MEArLFW5SikUexBpPlQJs1IAQuYYB3nGaZ4bKJ+kKDmn++KdyMefbxp6U8/1pqjbEbitaqlYUYq/D7w5cUOE1dxZeZVXB0kUZJVPeBAUE0+iLaNHpnE/3oRVes9sv6ij0tpNsuBdy48JwZo8julm+VDobtOKeZkpP4xxp6zh2F0Hk8L58cWkalJBt9knzX2MMQFooCIcOehwgZSNMiALgEQVBE/08VMcPJdeNDPBRh8fHZQMlsdlO4c/u+s4bkJt8GOAPq0frvaTN6C5x4sPv8KMNcFWx7EzhSIPGkJxkcK7C7dozXriOexZ4yMvjvP4SibvB0=
