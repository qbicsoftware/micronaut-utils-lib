dist: xenial
language: java
jdk: openjdk8
cache:
  directories:
  - $HOME/.m2/repository
  - $HOME/.cache/pip
  - $HOME/miniconda3
branches:
  only:
  - master
  - development
  - /^[vV]?\d+\.\d+\.\d+$/
before_install: unset _JAVA_OPTIONS
install:
- $HOME/miniconda3/bin/conda --version || ./.install-reports-dependencies.sh
before_script: if [ "$VAADIN_CHARTS_LICENSE_CODE" != "" ]; then echo "$VAADIN_CHARTS_LICENSE_CODE"
  > ~/.vaadin.charts.developer.license; fi;
script: mvn --quiet --activate-profiles !development-build,!release-build --settings
  .travis.settings.xml clean cobertura:cobertura package
after_success:
- bash <(curl -s https://codecov.io/bash)
deploy:
- skip_cleanup: true
  provider: script
  script: mvn --quiet --activate-profiles development-build,!release-build --settings
    .travis.settings.xml deploy -DskipITs
  on:
    branch: development
    condition: '"$TRAVIS_EVENT_TYPE" = "push"'
- skip_cleanup: true
  provider: script
  script: mvn --quiet --activate-profiles !development-build,release-build --settings
    .travis.settings.xml deploy -DskipITs
  on:
    condition: '"$TRAVIS_EVENT_TYPE" = "push"'
    tags: true
after_deploy:
- echo ". $HOME/miniconda3/etc/profile.d/conda.sh" >> ~/.bashrc && source ~/.bashrc
  && conda activate qbic-docs-build
- mvn --quiet --activate-profiles !development-build,!release-build --settings .travis.settings.xml
  site
- ./.generate-reports.py $TRAVIS_BRANCH $TRAVIS_REPO_SLUG "[skip travis] Updated gh-pages"
  "This commit was performed from travis-ci.com using a personal access key" "Build
  ID $TRAVIS_BUILD_ID" "Job ID TRAVIS_JOB_ID" "Branch $TRAVIS_BRANCH" "Log of this
  build found at $TRAVIS_JOB_WEB_URL"
notifications:
  email:
    on_success: never
    on_failure: never
  slack:
    on_success: never
    on_failure: always
    rooms:
    - secure: '***'
env:
  global:
  - secure: BobgEWF9xeMPtOJMuG4WBA49lUxbc6HkF4U6jWqdkzErinqc/fjNZfPdOc3MUN6tkjvaiUuxC9muRH46lsBU/ikbt54A5Xm3Tk32lZy7ht3DsN9jtljmP5oyn45v5QpsBuw9KCIDPefLrpk+Q7CuHlPkKxGJZRpsAJwnk3oKZJ87q/xXilBx76h1yBoN3ehFXeFpIs7ngLCJOToD/hqT+UkjVtn2GwTrSor+5srcDyvpIfUjFN1s4Kv2Ugc1q0me1eCJ/YOGbRLa7yBiDnqSujjZK+32+V+AjCJ+UVgoZLD/TceTbr18JjK7ppLPKFZMnhCjv6N6XRVQu4XiC91fqoxiyYH1GX2ecjFElOxlpCIPlqw2/wo84auQIKAOyKGCtuvVgZpg9rFtjID1NT5teDoH6ItSTyYFj8G4+WWlnpHIvOWElLIh4v8yzZ6apiS5j7oHByvX9gpPl7mo1P/I4h28yqMrsiobKK+Bdy6CXooCreXfjAp17LJl+8DWBPmS5UueaUIbRwuoUnVuFut4Av5rOptUefsdlnL7gdgkEBAZzQfRoNkwWNoh5cp1i6zgyt4+GW5oSJJh494qGGpVXfzvls0+bJW1gvryYqH85QKaslBoA4/UhsOzZkJEJ4cmHQYs3BkvKsIBhkZiPeCXcy+nBglCXXH/E6P1A92Eykc=
  - secure: l05y1Dq8Hc1hnnXgiMUbxb0TMyN1wwPgZd6cwaeWHkTXP3BNQzuSFGaQ9nlVd3v6bUVQ5WGJjsY3t+WnJhOj4LvOXWkwJxT+8VgmIKBveAJC00WU7cdC8nagCvuNJHMqxBGKK/bHOvmt7YQMLqlKZTj+wEwCVdpUFVzEC79YUDBK9fZgdLerBouCvG+tD4ARracxzeqSYxVC2sxpNTZ8J37D3CLy11YhUWcV6nJHtpV2MIo8rUsnMqmwKww3CfDLHCQXnPItIH9PRDPurotm/MDgKhVg1WNyu4wkbZ8fMKdSMHG0WRjT6PH66TzCxc0woVME4h5bHEwo2Mj7uchsq9n8cDbXv3YuMEXWLFwK1h/oOEC25HhF2mvJp9Dai8B6tG1vOjLDw/lVlCLiV467N17WRDw8/nvclhTGtwpmIFfumLAffWiK/aZraR/YuM/id7SG4BLGbo61e9HIir7vwrpqie23s6J26IQ+pMPMgoO8rXFBWYQ+LY7yRsPHz+aFgBvDWkD/M9VKy2m2I7iH5hU0FZSEh7g4HpDxKOY1RiiBUt0eOLBYB76SvDampxly5j8sl1IT77zB3YzToqsLTOM/aLXQkyE4pmvCaauwUm00zYRBHlfHGkb/orXq9udfCSa4XhRMMeZLAGwh7NY5Ee+me4ecbFmMczyBn4HgfrE=
