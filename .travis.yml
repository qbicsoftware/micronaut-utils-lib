dist: xenial
language: java
jdk: openjdk8
cache:
  directories:
  - $HOME/.m2/repository
  - $HOME/.cache/pip
  - $HOME/miniconda3
branches:
  only:
  - master
  - development
  - /^[vV]?\d+\.\d+\.\d+$/
before_install: unset _JAVA_OPTIONS
install:
- $HOME/miniconda3/bin/conda --version || ./.install-reports-dependencies.sh
before_script: if [ "$VAADIN_CHARTS_LICENSE_CODE" != "" ]; then echo "$VAADIN_CHARTS_LICENSE_CODE"
  > ~/.vaadin.charts.developer.license; fi;
script: mvn --quiet --activate-profiles !development-build,!release-build --settings
  .travis.settings.xml clean cobertura:cobertura package
after_success:
- bash <(curl -s https://codecov.io/bash)
deploy:
- skip_cleanup: true
  provider: script
  script: mvn --quiet --activate-profiles development-build,!release-build --settings
    .travis.settings.xml deploy -DskipITs
  on:
    branch: development
    condition: '"$TRAVIS_EVENT_TYPE" = "push"'
- skip_cleanup: true
  provider: script
  script: mvn --quiet --activate-profiles !development-build,release-build --settings
    .travis.settings.xml deploy -DskipITs
  on:
    condition: '"$TRAVIS_EVENT_TYPE" = "push"'
    tags: true
after_deploy:
- echo ". $HOME/miniconda3/etc/profile.d/conda.sh" >> ~/.bashrc && source ~/.bashrc
  && conda activate qbic-docs-build
- mvn --quiet --activate-profiles !development-build,!release-build --settings .travis.settings.xml
  site
- ./.generate-reports.py $TRAVIS_BRANCH $TRAVIS_REPO_SLUG "[skip travis] Updated gh-pages"
  "This commit was performed from travis-ci.com using a personal access key" "Build
  ID $TRAVIS_BUILD_ID" "Job ID TRAVIS_JOB_ID" "Branch $TRAVIS_BRANCH" "Log of this
  build found at $TRAVIS_JOB_WEB_URL"
notifications:
  email:
    on_success: never
    on_failure: never
  slack:
    on_success: never
    on_failure: always
    rooms:
    - secure: '***'
env:
  global:
  - secure: RwWBLj1KrJ34lAXC9DJxXTT5nuKDXiWJ0kf7lkkp181XXl8+4bZJZhBtPqrSK8GBN+udvPNRbAk+/kkzaJRWTetYgQrSBCiB8WEmYJh+Y7gvgo5RBropa86Z61TlzXcH92JsE3ldqJFy1Gp6tFgLwQpekT5XlIKh6Q4T2rmA/jIV4CgvooBGarfOgj433jrk5gkuv8j23u30L3nLAoMxzN991nx93Kb8Mm8VwmTJGtKFs1SWnCGE5on+YteyOwRiZBoRN88Xb/rn//1Ok7KivCKLBENKrxPn9kRzvynS9ifIygA4t/dxatpXlZHoPg7Ws1g8W46Za4AYm0rw6YrIy5tX60uBrjBDwLvQEcT575H9lUn5vWvrTj1ELpnrf4uCXYVCnEeN9CaLQN/AJd4b/LTtrFaVV3PhdWxhpWf+vilyMR91Pm63b+AguF8+nhcJCwJOR4trlq+lwln3sq0xw49iq2G3NXfQNZHYw3E3HUkz7k7zl1daSaiFGWQJRrp/+Hbngj5mkBd/pX7T/+FU4Bf/mWclwUlNGO0WQFxlYSHZp6nBsL0JynWCu/7owV9RIkWx2pD7HmsuwEFwYWKtuMzRr6yr9LPjuBgvDi2TdY5Fef3tQvG4r+JURyIfI2G+BGAD7TdotOuJyNU3I72cq9T6TJOq8KZWON75chJzMI0=
  - secure: 0S3ep0HZtVqPCrz7ArY/fkLQPHGil/8LQLO+rsqg1BC0FxEjJ9aLXaxRJhgx3eNfv8lmdCfhBJ7YQPFifzIAed9k7T8g/81GiUADmkVMC9TxLLdPTb+4q81v4CSGB8sr+B/OC1FckXVd2oJFaE+Q8K///WQJ8teRKRZGjLP/X1OzoUShZTvk/Rh/hP2vt6/ixuYmkuovKiLRJAY0oVaXnhmG/fdidiVURpzrtizRzG/0iW1/Yg9Rdi4/24R8hcXOCfDcyyQvv6jlmlNelCOdzsLkbUUkM7M4TACUgVX6LROka6YAZzbat4i1XXOQad/BzSKPfFULcr3tNSfxfUSjLxRZ2z9LiEjHzGFnLu/g2dQInu6mo0trAy/EsSD8AikH4gn59wY3iShwbQKubmF8AN6tDDGSD8APWdVQFBN6qYQ2BG6tHgEJO46EO5O8PYnbjif6Bh40pHzQNUXx/4fc5g4KwfJ/HI2O3MQOG5tZ4fWz91dcfeD9Acw9CpCgmGvl6vBWbr369+7Kb4mTpcV5/sqS6ASz2mSQIpJRXSSZcUQk2dqXIvZIY9t8BbE3JMKfjVxYZMRQbAK4oSxJxv3Avmrv/hvIsUoy/lrguzsaxz0tLukDruPgiF0y0FXZJ+Y20jDelN2uISI88emYa2Us/ulyKGWW2/j9AoSwvaPw1b0=
